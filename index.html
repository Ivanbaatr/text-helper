<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>환율 계산기 - Money Counter JSON Helper</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; padding: 40px; background-color: #f5f5f7; color: #1d1d1f; line-height: 1.5; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 40px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        h1 { font-size: 24px; font-weight: 700; margin-bottom: 30px; text-align: center; color: #333; }
        
        .section-label { font-size: 13px; font-weight: 600; color: #86868b; margin-bottom: 8px; display: block; text-transform: uppercase; letter-spacing: 0.5px; }
        
        textarea { width: 100%; height: 200px; padding: 15px; border: 1px solid #d2d2d7; border-radius: 12px; font-family: "SF Mono", "Courier New", monospace; font-size: 14px; box-sizing: border-box; margin-bottom: 25px; outline-color: #0071e3; background-color: #fbfbfd; resize: vertical; }
        
        .result-layout { margin-bottom: 25px; }
        .preview-box { background: #f9f9fb; border: 1px solid #e5e5e7; border-radius: 12px; padding: 20px; min-height: 150px; max-height: 400px; overflow-y: auto; }
        .preview-content { font-size: 14px; white-space: pre; color: #333; line-height: 1.8; font-family: "SF Mono", "Courier New", monospace; }
        
        button { width: 100%; padding: 16px; background-color: #0071e3; color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.2s; }
        button:hover { background-color: #0077ed; transform: translateY(-1px); }
        button:active { transform: translateY(0); }

        .tip { font-size: 12px; color: #888; margin-top: 15px; text-align: center; line-height: 1.6; }
    </style>
</head>
<body>

<div class="container">
    <h1>환율 계산기 데이터 변환기</h1>
    
    <span class="section-label">Input Area (Numbers에서 두 열을 복사해 붙여넣으세요)</span>
    <textarea id="inputArea" placeholder="예시:&#10;total_sum	총합계&#10;daily_exp	일일지출"></textarea>

    <div class="result-layout">
        <span class="section-label">Money Counter JSON 결과</span>
        <div class="preview-box">
            <div id="jsonPreview" class="preview-content"></div>
        </div>
    </div>

    <button onclick="copyToClipboard()">JSON 결과 복사하기</button>
    <p class="tip">
        1. Numbers에서 열 두 개를 선택하여 복사(Cmd+C)합니다.<br>
        2. 위 입력창에 붙여넣으면 자동으로 <strong>{ "key": "word" }</strong> 포맷이 생성됩니다.<br>
        3. 각 줄에는 4칸의 들여쓰기가 적용됩니다.
    </p>
</div>

<script>
    const inputArea = document.getElementById('inputArea');
    const jsonPreview = document.getElementById('jsonPreview');

    function processText() {
        const lines = inputArea.value.split('\n');
        let resultLines = [];

        // 비어있지 않은 줄만 걸러내기
        const activeLines = lines.filter(line => line.trim() !== "");

        if (activeLines.length === 0) {
            jsonPreview.innerText = "";
            return;
        }

        activeLines.forEach((line, index) => {
            let key = "";
            let word = "";

            if (line.includes('\t')) {
                const parts = line.split('\t');
                key = parts[0].trim();
                word = parts[1] ? parts[1].trim() : "";
            } else if (line.includes(':')) {
                const parts = line.split(':');
                key = parts[0].trim();
                word = parts[1] ? parts[1].trim() : "";
            } else {
                key = line.trim();
                word = line.trim();
            }

            const cleanKey = key.replace(/^["']+/g, '').replace(/["',]+$/g, '');
            const cleanWord = word.replace(/^["']+/g, '').replace(/["',]+$/g, '');

            const isLast = (index === activeLines.length - 1);
            // 4칸 들여쓰기 추가
            const lineContent = `    "${cleanKey}": "${cleanWord}"${isLast ? "" : ","}`;

            if (cleanKey || cleanWord) {
                resultLines.push(lineContent);
            }
        });

        // 처음과 끝에 { } 추가
        const finalJson = "{\n" + resultLines.join('\n') + "\n}";
        jsonPreview.innerText = finalJson;
    }

    function copyToClipboard() {
        const text = jsonPreview.innerText;
        if (!text) return;

        navigator.clipboard.writeText(text).then(() => {
            alert('JSON 데이터가 복사되었습니다!');
        }).catch(err => {
            alert('복사 실패! 직접 드래그해서 복사해 주세요.');
        });
    }

    inputArea.addEventListener('input', processText);
</script>

</body>
</html>
